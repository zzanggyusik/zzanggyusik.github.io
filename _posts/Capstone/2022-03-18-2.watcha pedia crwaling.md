---
title:  "[Capstone] ì™“ì± í”¼ë””ì•„ ì˜í™” ë¦¬ë·° í¬ë¡¤ë§"
excerpt: "Seleniumìœ¼ë¡œ ì™“ì± í”¼ë””ì•„ ì˜í™” ë¦¬ë·° í¬ë¡¤ë§í•˜ê¸°"
toc: true
toc_label: "ì™“ì± í”¼ë””ì•„ ì˜í™” ë¦¬ë·° í¬ë¡¤ë§"
toc_sticky: true
published: true

categories:
  - Capstone
tags:
  - Selenium
  - Movie Review Crawling
  - Chrome Driver
last_modified_at: 2022-06-01

---

ì™“ì± í”¼ë””ì•„ëŠ” ë¬´í•œìŠ¤í¬ë¡¤ ë°©ì‹ìœ¼ë¡œ ì˜í™” ë¦¬ë·°ë¥¼ ì œê³µí•˜ê³  ìˆëŠ”ë°, ë„¤ì´ë²„ ì˜í™”ë‚˜ cgv ì˜í™” ë¦¬ë·° í¬ë¡¤ë§ì€ ìë£Œê°€ ì¢€ ìˆì—ˆëŠ”ë° ì™“ì± í”¼ë””ì•„ëŠ” ì—†ì—ˆë‹¤ ğŸ˜¢

ê·¸ë˜ì„œ seleniumì„ ë”°ë¡œ ê³µë¶€í•´ ë¬´ì‘ì • í•´ë´¤ë‹¤.

<br>

### ì²« ë²ˆì§¸ ì‹œë„

ìŠ¤í¬ë¡¤ì„ ë§¨ ë°‘ìœ¼ë¡œ ë‚´ë¦° ë‹¤ìŒ find_elements()ë¥¼ ì‚¬ìš©í•´ì„œ ëª¨ë‘ í¬ë¡¤ë§í•˜ê¸°

â¡ï¸ ì‹¤íŒ¨

ì›¹ ë“œë¼ì´ë²„ì˜ í™”ë©´ ë‚´ì— ìˆëŠ” ë¦¬ë·°ë“¤ë§Œ ê°€ì ¸ì™€ì„œ ìœ„ì— ìˆëŠ” ë¦¬ë·°ë“¤ì€ í¬ë¡¤ë§ì´ ì•ˆëë‹¤.

<img width="1460" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 5 36 30" src="https://user-images.githubusercontent.com/76269316/158965432-c417ae4e-e9d8-44ef-aa03-2c2885ab2f6a.png">

<br><br>

### ë‘ ë²ˆì§¸ ì‹œë„

í¬ë¡¤ë§ í•œ ë‹¤ìŒ í™”ë©´ ë‚´ë¦¬ê³  -> ë‹¤ì‹œ í¬ë¡¤ë§ í•œ ë‹¤ìŒ í™”ë©´ ë‚´ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ í¬ë¡¤ë§í•˜ê¸°

â¡ï¸ ì‹¤íŒ¨

ì²« ë²ˆì§¸ ì‹œë„ì²˜ëŸ¼ í™”ë©´ ë‚´ì— ìˆëŠ” ë¦¬ë·°ë“¤ë§Œ ê°€ì ¸ì˜¤ëŠ”ì§€ ë™ì¼í•œ ë¦¬ë·°ê°€ ë‘ ë²ˆì”© í¬ë¡¤ë§ ëë‹¤. ì–´ë–¤ê±´ ì•ˆëë‹¤.

<img width="1458" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 5 42 08" src="https://user-images.githubusercontent.com/76269316/158966283-1bb9d820-1a7d-46f5-963d-962ce5df1536.png">

<br><br>

### ì„¸ ë²ˆì§¸ ì‹œë„

<img width="1624" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 6 02 52" src="https://user-images.githubusercontent.com/76269316/158972726-27307411-648e-497f-bd64-bd39abbaf09d.png">

ë¦¬ë·° í…ìŠ¤íŠ¸ ë¶€ë¶„ì˜ XPathë¥¼ í•˜ë‚˜í•˜ë‚˜ ë³´ë‹ˆê¹Œ div ì¸ë±ìŠ¤ ë²ˆí˜¸ í•˜ë‚˜ë§Œ ë°”ë€Œì–´ì„œ

```html
//*[@id="root"]/div/div[1]/section/section/div/div/div/ul/div[1]/div[2]/a/div
//*[@id="root"]/div/div[1]/section/section/div/div/div/ul/div[2]/div[2]/a/div
//*[@id="root"]/div/div[1]/section/section/div/div/div/ul/div[3]/div[2]/a/div
```

ì € ë¶€ë¶„ë§Œ ìˆœíšŒí•˜ë©´ì„œ í¬ë¡¤ë§ í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ í–ˆëŠ”ë°

<img width="1462" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 6 06 32" src="https://user-images.githubusercontent.com/76269316/158973327-0a0ade02-daa5-45be-abdc-64c1c33b3243.png">

ì•„ë‹ˆì˜€ë‹¤. <img width="89" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 6 09 16" src="https://user-images.githubusercontent.com/76269316/158973705-9a93e185-0530-40ba-814b-bab317a0981a.png">

<br><br>

### ë„¤ ë²ˆì§¸ ì‹œë„

ë‹¤ì‹œ ì²« ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ ëŒì•„ì™€ì„œ ìŠ¤í¬ë¡¤ì„ ë§¨ ë°‘ìœ¼ë¡œ ë‚´ë¦° ë‹¤ìŒì— í˜ì´ì§€ ì†ŒìŠ¤ì—ì„œ BeautifulSoupì˜ findall í•¨ìˆ˜ë¥¼ í†µí•´ ë¦¬ë·° ë¶€ë¶„ë§Œ ì¶”ì¶œí•˜ê¸°

<img width="1460" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 11 26 25" src="https://user-images.githubusercontent.com/76269316/159021249-9c499442-e0b7-4cfe-b3dc-6b61060db35f.png">

â¡ï¸ ~~ì ˆë°˜ì˜ ì„±ê³µ (í˜ì´ì§€ ì†ŒìŠ¤ì—ì„œ ì¶”ì¶œí•˜ë‹¤ ë³´ë‹ˆ ì†ŒìŠ¤ê°€ ì „ë¶€ ì•ˆë‚˜ì™€ì„œ ë¦¬ë·°ê°€ ì¼ë¶€ ì˜ë¦° ê²ƒ ê°™ë‹¤.)~~

~~ìŠ¤íŒŒì´ë”ë§¨ (2002) ë¦¬ë·°~~

~~ë¦¬ë·°ê°€ 3000ê°œ ì´ìƒì´ë¼ëŠ”ë°~~

<img width="614" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 11 28 26" src="https://user-images.githubusercontent.com/76269316/159021606-b096671b-5e7a-419e-ab81-7f664cd9911f.png">

~~í¬ë¡¤ë§ì€ 2517ê°œ ë°–ì— ì•ˆëë‹¤ ğŸ˜­~~

<img width="1460" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 11 29 22" src="https://user-images.githubusercontent.com/76269316/159021793-11b06455-3938-409e-9e88-e53143ed86da.png">

<br>

â¡ï¸ ì½”ë©ì—ì„œ ì‹¤í–‰ì‹œí‚¤ë©´ ì•ˆë˜ëŠ”ë° ì„œë²„(ë¡œì»¬)ì—ì„œ ì‹¤í–‰ì‹œí‚¤ë‹ˆê¹Œ ì•„ì£¼ ì˜ëœë‹¤ ğŸ˜€

<img width="929" alt="ìŠ¤í¬ë¦°ìƒ· 2022-04-07 ì˜¤í›„ 8 25 47" src="https://user-images.githubusercontent.com/76269316/162188352-176ac1b6-098c-43b4-8fce-725eb9195a7a.png">

<br>

**ì½”ë“œ**

- ì›¹ ë“œë¼ì´ë²„ ë° ë¦¬ë·° url ë¡œë“œ

```python
from selenium import webdriver
from selenium.webdriver.common.by import By
import time

driver = webdriver.Chrome('chromedriver', options=chrome_options)
url = 'https://pedia.watcha.com/ko-KR/contents/mBOkBwW/comments'
driver.get(url)
```

<br>

- ë¬´í•œ ìŠ¤í¬ë¡¤ ë§¨ ë°‘ìœ¼ë¡œ ë‚´ë¦¬ê¸°

```python
scroll_pane_height = driver.execute_script('return document.documentElement.scrollHeight')

while True:
    driver.execute_script('window.scrollTo(0, document.documentElement.scrollHeight)')

    time.sleep(3)
    new_scroll_pane_height = driver.execute_script('return document.documentElement.scrollHeight')
    print(scroll_pane_height, new_scroll_pane_height)

    if scroll_pane_height == new_scroll_pane_height:
        break

    scroll_pane_height = new_scroll_pane_height
```

<br>

- í˜ì´ì§€ ì†ŒìŠ¤ì—ì„œ reviewê°€ ë‹´ê²¨ìˆëŠ” css-1g78l7j í´ë˜ìŠ¤ì˜ ëª¨ë“  ìš”ì†Œë¥¼ ê°€ì ¸ì˜´
- <img width="1624" alt="ìŠ¤í¬ë¦°ìƒ· 2022-03-18 ì˜¤í›„ 11 32 25" src="https://user-images.githubusercontent.com/76269316/159022308-1ee92475-83d2-40b0-aad5-5c883858ea2b.png">

```python
import re
from bs4 import BeautifulSoup

html = driver.page_source
soup = BeautifulSoup(html, 'lxml')
reviews = soup.find_all("div", {"class":"css-1g78l7j"})

for review in reviews:
    print(review.get_text())
```

<br>

### Trouble Shooting

##### 5/31

ì˜¤ëœë§Œì— í¬ë¡¤ë§í•  ì¼ì´ ìƒê²¨ì„œ seleniumìœ¼ë¡œ í¬ë¡¤ë§í•˜ë ¤ëŠ”ë°, ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 100

<br>

```shell
# í¬ë¡¬ ë²„ì „ í™•ì¸
$ google-chrome --version
```

í¬ë¡¬ ë²„ì „ í™•ì¸í•˜ê³  [https://chromedriver.chromium.org/downloads](https://chromedriver.chromium.org/downloads)ì—ì„œ í¬ë¡¬ê³¼ ê°™ì€ ë“œë¼ì´ë²„ë¥¼ ì„¤ì¹˜í•´ ì¤¬ëŠ”ë°ë„ ê³„ì† ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

ì‚½ì§ˆ ì¢€ í•˜ë‹¤ê°€ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë‹¤ì‹œ ë³´ë‹ˆ ë‚´ í¬ë¡¬ ë²„ì „ì€ 102ì˜€ê³ , ë²„ì „ 100ë§Œ ì§€ì›í•œë‹¤ëŠ” ë‚´ìš©ì´ì˜€ë‹¤ ğŸ¤¦ğŸ»â€â™‚ï¸

<br>

[https://www.ubuntuupdates.org/package/google_chrome/stable/main/base/google-chrome-stable](https://www.ubuntuupdates.org/package/google_chrome/stable/main/base/google-chrome-stable) ì—¬ê¸° ìˆëŠ” ë²„ì „ ì¤‘ ì—ëŸ¬ ë©”ì‹œì§€ì™€ ê°™ì€ ë²„ì „ìœ¼ë¡œ Version ë³€ìˆ˜ë¥¼ ë§ì¶°ì£¼ê³ , ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë‹ˆ ì˜ëœë‹¤.

```shell
$ Version ="100.0.4896.127-1" # ì—ëŸ¬ ë©”ì‹œì§€ì™€ ê°™ì€ ë²„ì „ìœ¼ë¡œ ìˆ˜ì •
$ wget "https://dl.google.com/linux/chrome/deb/pool/main/g/google-chrome-stable/google-chrome-stable_${Version}_amd64.deb"
$ sudo dpkg -i "google-chrome-stable_${Version}_amd64.deb"
$ rm -i "google-chrome-stable_${Version}_amd64.deb"
```

ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì˜ í™•ì¸í•˜ì .. â—ï¸
